{"ast":null,"code":"var _jsxFileName = \"E:\\\\final_project\\\\Air_visca_frontend\\\\src\\\\screens\\\\ShowUserBookingsScreen.js\";\nimport React, { Component } from \"react\";\nimport FlightAPIService from \"../service/FlightAPIService\";\nimport Modal from \"react-modal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ShowUserBookingScreen extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onClickButton = () => {\n      this.setState({\n        Open: true\n      });\n    };\n\n    this.onCancelModal = () => {\n      this.setState({\n        Open: false\n      });\n    };\n\n    this.state = {\n      bookings: [],\n      message: null,\n      Open: false\n    };\n    this.cancelBooking = this.cancelBooking.bind(this);\n    this.reloadBookingList = this.reloadBookingList.bind(this);\n    this.onClickButton = this.onClickButton.bind(this);\n    this.onCancelModal = this.onCancelModal.bind(this);\n  }\n\n  componentDidMount() {\n    this.reloadBookingList();\n  }\n\n  reloadBookingList() {\n    FlightAPIService.getBookingsByUserId(window.sessionStorage.getItem(\"userid\")).then(res => {\n      console.log(res);\n      if (res.data.status == \"success\") this.setState({\n        bookings: res.data.data\n      });else this.props.history.push(\"/customer/search_flight\");\n      console.log(this.state.bookings);\n    });\n  }\n\n  cancelBooking(bookingId) {\n    FlightAPIService.cancelBookingByUserId(bookingId).then(res => {\n      this.setState({\n        Open: false\n      });\n      this.setState({\n        message: \"Booking cancelled successfully.\"\n      });\n      this.setState({\n        bookings: this.state.bookings.filter(booking => booking.bookingId !== bookingId)\n      });\n      if (this.state.bookings == 0) this.props.history.push('/customer/search_flight');\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center\",\n        children: \"Bookings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table table-striped\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Booking Id\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Airline Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"User Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Booking Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Departure Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Arrival Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Total Fare\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.bookings.map(booking => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.bookingId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.airlineName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.userName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.bookingDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.journeyDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.arrivalDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.totalFare\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                onClick: () => this.onClickButton(),\n                children: [\" \", \"Cancel Booking\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Modal, {\n                isOpen: this.state.Open,\n                style: {\n                  overlay: {\n                    backgroundColor: 'grey'\n                  },\n                  content: {\n                    paddingTop: \"200px\",\n                    textAlign: \"center\"\n                  }\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  children: \"Refund Details\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: [\"Refund Amount Of : \", booking.totalFare / 2, \" will be Initiated Shortly\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Are You Sure You Want To Cancel Your booking\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-success mx-3\",\n                  onClick: this.onCancelModal,\n                  children: \" No \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-danger\",\n                  onClick: () => this.cancelBooking(booking.bookingId),\n                  children: \" Yes \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 17\n            }, this)]\n          }, booking.bookingId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ShowUserBookingScreen;","map":{"version":3,"sources":["E:/final_project/Air_visca_frontend/src/screens/ShowUserBookingsScreen.js"],"names":["React","Component","FlightAPIService","Modal","ShowUserBookingScreen","constructor","props","onClickButton","setState","Open","onCancelModal","state","bookings","message","cancelBooking","bind","reloadBookingList","componentDidMount","getBookingsByUserId","window","sessionStorage","getItem","then","res","console","log","data","status","history","push","bookingId","cancelBookingByUserId","filter","booking","render","map","airlineName","userName","bookingDate","journeyDate","arrivalDate","totalFare","overlay","backgroundColor","content","paddingTop","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport FlightAPIService from \"../service/FlightAPIService\";\r\nimport Modal from \"react-modal\";\r\n\r\n\r\nclass ShowUserBookingScreen extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bookings: [],\r\n      message: null,\r\n      Open: false,\r\n\r\n\r\n    };\r\n    this.cancelBooking = this.cancelBooking.bind(this);\r\n    this.reloadBookingList = this.reloadBookingList.bind(this);\r\n    this.onClickButton=this.onClickButton.bind(this);\r\n    this.onCancelModal=this.onCancelModal.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.reloadBookingList();\r\n  }\r\n\r\n  reloadBookingList() {\r\n    FlightAPIService.getBookingsByUserId(window.sessionStorage.getItem(\"userid\"))\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.data.status == \"success\")\r\n            this.setState({ bookings: res.data.data });\r\n          else this.props.history.push(\"/customer/search_flight\");\r\n          console.log(this.state.bookings);\r\n    });\r\n  }\r\n\r\n  cancelBooking(bookingId) {\r\n    FlightAPIService.cancelBookingByUserId(bookingId).then((res) => {\r\n      this.setState({Open: false});\r\n      this.setState({ message: \"Booking cancelled successfully.\" });\r\n      this.setState({\r\n        bookings: this.state.bookings.filter((booking) => booking.bookingId !== bookingId),\r\n       \r\n      });\r\n     \r\n      if(this.state.bookings==0)\r\n      this.props.history.push('/customer/search_flight')\r\n    });\r\n  }\r\n  onClickButton=()=>{\r\n    this.setState({Open: true})\r\n  }\r\n  onCancelModal=()=>{\r\n    this.setState({Open: false})\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2 className=\"text-center\">Bookings</h2>\r\n        <table className=\"table table-striped\">\r\n          <thead>\r\n            <tr>\r\n              <th>Booking Id</th>\r\n              <th>Airline Name</th>\r\n              <th>User Name</th>\r\n              <th>Booking Date</th>\r\n              <th>Departure Date</th>\r\n              <th>Arrival Date</th>\r\n              <th>Total Fare</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.state.bookings.map((booking) => (\r\n              <tr key={booking.bookingId}>\r\n                <td>{booking.bookingId}</td>\r\n                <td>{booking.airlineName}</td>\r\n                <td>{booking.userName}</td>\r\n                <td>{booking.bookingDate}</td>\r\n                <td>{booking.journeyDate}</td>\r\n                <td>{booking.arrivalDate}</td>\r\n                <td>{booking.totalFare}</td>\r\n                <td>\r\n                  <button\r\n                    className=\"btn btn-success\"\r\n                    onClick={() => this.onClickButton()}\r\n                  >\r\n                    {\" \"}\r\n                    Cancel Booking\r\n                  </button>\r\n                  <Modal isOpen = {this.state.Open} \r\n                 \r\n                  style={\r\n                    {\r\n                      overlay: {\r\n                       \r\n                        backgroundColor: 'grey'\r\n                      },\r\n                      content: {\r\n                        paddingTop: \"200px\",\r\n                        textAlign: \"center\"\r\n                      }\r\n                    }\r\n                  }>\r\n                    <h1>Refund Details</h1> \r\n                    <br/>\r\n                    <h4>Refund Amount Of : {booking.totalFare/2} will be Initiated Shortly</h4>\r\n                    <br/>                    \r\n                    <h4>Are You Sure You Want To Cancel Your booking</h4>\r\n                    <br/>\r\n                    <button className=\"btn btn-success mx-3\" onClick={this.onCancelModal}> No </button>\r\n\r\n                    <button className=\"btn btn-danger\" onClick={()=>this.cancelBooking(booking.bookingId)}> Yes </button>\r\n                  </Modal>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShowUserBookingScreen;\r\n"]},"metadata":{},"sourceType":"module"}