{"ast":null,"code":"var _jsxFileName = \"E:\\\\final_project\\\\Air_visca_frontend\\\\src\\\\screens\\\\ShowBookingsScreen.js\";\nimport React, { Component } from \"react\";\nimport FlightAPIService from \"../service/FlightAPIService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ShowBookingScreen extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bookings: [],\n      message: null\n    };\n    this.cancelBooking = this.cancelBooking.bind(this);\n    this.reloadBookingList = this.reloadBookingList.bind(this);\n  }\n\n  componentDidMount() {\n    this.reloadBookingList();\n  }\n\n  reloadBookingList() {\n    FlightAPIService.getBookingsByFlightId(window.sessionStorage.getItem(\"aid\")).then(res => {\n      console.log(res);\n      if (res.data.status == \"success\") this.setState({\n        bookings: res.data.data\n      });else this.props.history.push(\"/admin\");\n      console.log(this.state.bookings);\n    });\n  }\n\n  cancelBooking(bookingId) {\n    FlightAPIService.cancelBookingByBookId(bookingId).then(res => {\n      this.setState({\n        message: \"Booking cancelled successfully.\"\n      });\n      this.setState({\n        bookings: this.state.bookings.filter(booking => booking.bookingId !== bookingId)\n      });\n      if (this.state.bookings == 0) this.props.history.push('/admin');\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center\",\n        children: \"Bookings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table table-striped\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"hidden\",\n              children: \"Booking Id\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Airline Id\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"User Id\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Booking Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Departure Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Arrival Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Total Fare\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.bookings.map(booking => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.bookingId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.airlineId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.userId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.bookingDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.journeyDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.arrivalDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.totalFare\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                onClick: () => this.cancelBooking(booking.bookingId),\n                children: [\" \", \"Cancel Booking\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this)]\n          }, booking.bookingId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ShowBookingScreen;","map":{"version":3,"sources":["E:/final_project/Air_visca_frontend/src/screens/ShowBookingsScreen.js"],"names":["React","Component","FlightAPIService","ShowBookingScreen","constructor","props","state","bookings","message","cancelBooking","bind","reloadBookingList","componentDidMount","getBookingsByFlightId","window","sessionStorage","getItem","then","res","console","log","data","status","setState","history","push","bookingId","cancelBookingByBookId","filter","booking","render","map","airlineId","userId","bookingDate","journeyDate","arrivalDate","totalFare"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport FlightAPIService from \"../service/FlightAPIService\";\r\n\r\nclass ShowBookingScreen extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      bookings: [],\r\n      message: null,\r\n    };\r\n    this.cancelBooking = this.cancelBooking.bind(this);\r\n    this.reloadBookingList = this.reloadBookingList.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.reloadBookingList();\r\n  }\r\n\r\n  reloadBookingList() {\r\n    FlightAPIService.getBookingsByFlightId(window.sessionStorage.getItem(\"aid\"))\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.data.status == \"success\")\r\n            this.setState({ bookings: res.data.data });\r\n          else this.props.history.push(\"/admin\");\r\n          console.log(this.state.bookings);\r\n    });\r\n  }\r\n\r\n  cancelBooking(bookingId) {\r\n    FlightAPIService.cancelBookingByBookId(bookingId).then((res) => {\r\n      this.setState({ message: \"Booking cancelled successfully.\" });\r\n      this.setState({\r\n        bookings: this.state.bookings.filter((booking) => booking.bookingId !== bookingId),\r\n      });\r\n      if(this.state.bookings==0)\r\n      this.props.history.push('/admin')\r\n    });\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h2 className=\"text-center\">Bookings</h2>\r\n        <table className=\"table table-striped\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"hidden\">Booking Id</th>\r\n              <th>Airline Id</th>\r\n              <th>User Id</th>\r\n              <th>Booking Date</th>\r\n              <th>Departure Date</th>\r\n              <th>Arrival Date</th>\r\n              <th>Total Fare</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.state.bookings.map((booking) => (\r\n              <tr key={booking.bookingId}>\r\n                <td>{booking.bookingId}</td>\r\n                <td>{booking.airlineId}</td>\r\n                <td>{booking.userId}</td>\r\n                <td>{booking.bookingDate}</td>\r\n                <td>{booking.journeyDate}</td>\r\n                <td>{booking.arrivalDate}</td>\r\n                <td>{booking.totalFare}</td>\r\n                <td>\r\n                  <button\r\n                    className=\"btn btn-success\"\r\n                    onClick={() => this.cancelBooking(booking.bookingId)}\r\n                  >\r\n                    {\" \"}\r\n                    Cancel Booking\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShowBookingScreen;\r\n"]},"metadata":{},"sourceType":"module"}